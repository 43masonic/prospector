<div id="container">

  <div id="slide-panel" v-bind:class="{ shrunken: isPanelHidden}">
    <div id="layer-widgets">
      <button class="ui tiny color1 icon button"
              v-on:click="clickedShowHide">
              <i class="angle double icon"
              v-bind:class="{ left: isPanelHidden, right: !isPanelHidden}"></i>
      </button>
    </div>
  </div> 
  
  <div id="panel" v-bind:class="{ shrunken: isPanelHidden}">
    <div id="preheader">
      <table id="table-header">
        <tr>
          <td class='title'>Vehicle Miles Traveled</td>
          <td>
            <a target="_blank" href="https://connectsf.org/">
              <img class="img-csf" src="https://connectsf.wpengine.com/wp-content/uploads/2016/07/connectsf-logo-color.png" alt="Connect SF">
            </a>
          </td>
        </tr>
      </table>
        
      <hr/>
      <div id="helpbar">
          <button class="ui mini right labeled icon color1 button"
                  v-on:click="clickToggleHelp">
                  <i class="help circle icon"></i>
                  What is this?
          </button>
          &nbsp;
          <button class="ui mini right labeled icon color1 button"
                  v-on:click="this.window.open('https://connectsf.org/','_blank')">
                  <i class="arrow right icon"></i>
                  Learn More
          </button>
          <hr/>
      </div>

      <div id="picker">
        <h5>CHOOSE SCENARIO</h5>
        <div>
          <button v-for="item in year_options"
                v-on:click="yrChanged(item.value)"
                class="ui tiny grey button"
                v-bind:class="{ active: item.value==selected_year, color2: item.value==selected_year }">
                ${item.text}
          </button>
        </div>
        
        <hr/>
        
        <h5>DISTRIBUTION OF VEHICLE MILES TRAVELED PER PERSON</h5>
        <div id='dist-chart' style="height: 200px"></div>
        <div id='chart-label'>Vehicle Miles Traveled per Person</div>
        
        <h5>MAP LAYERS</h5>
        <p>Add additional geographic data to the map.</p>
        <div v-for="item in extraLayers" class="ui toggle checkbox">
          <input type="checkbox" v-bind:value="item.view" v-model="addLayers">
          <label><h5>${item.name}
          <a class="icon" target="_blank" v-bind:href="item.info"><i v-if="item.info" class="question circle icon"></i></a>
          </h5></label>
        </div>
        
        <br><br>
        <h5>YOUR FEEDBACK</h5>
        <form class="ui tiny equal width form" v-on:submit.prevent="handleSubmit">
          <div class="ui field">
            <textarea v-model="comment" class="fix" maxlength="200" rows="3"
            v-bind:disabled="submit_disabled==true"
            type="text" placeholder="Based on this data, what do you think are the cityâ€™s transportation needs? (800 characters)"></textarea>
          </div>
          <button class="ui button color2" type="submit"
          v-bind:class="{loading: submit_loading==true, disabled: submit_disabled==true}">Submit</button>
        </form>
      </div>
    </div>

    <div class="logo">
      <hr/>
      <a class="agency-link" target="_blank" href="http://www.sfcta.org">
        <img class="img-logo" src="/assets/SFCTA Logo dark-background.svg">
      </a>
    </div>
  </div>

  <div id="helpbox" v-if="showHelp" class="ui segment">
    <div v-cloak> <!-- hides everything until Vue finished loading -->
      <h2 style="margin-bottom:0px;">Daily Vehicle Miles Traveled</h2>
      <hr style="margin-bottom:5px;margin-top:5px"/>
          <b>This map shows</b> average daily Vehicle Miles Traveled (VMT) per person based on the traffic analysis zone in which they live.<br><br>
          
          <b>The big takeaway is</b> for much of the city, VMT per person decreases or stays about the same between 2015 and 2050. However, VMT per person increases in some low-vmt areas near Downtown and South of Market. These changes may be due to an increase in population, increased access to jobs within a shorter distance for some, and congested conditions causing more people to travel shorter distances. While VMT per person declined on average, the tota VMT in 2050 increases compared to 2015.<br><br>
          
          <b>The need identified is</b> for policies, programs, and transportation investments that reduce reliance on automobiles in order to reduce VMT.<br><br>
          
          <b>Disclaimers/Sources:</b> VMT are based on estimates for an average weekday and for trips that start, end, or are within San Francisco.<br><br>


          <div style="margin-top:20px;">
            <button v-on:click="clickToggleHelp" class="small ui right floated teal button">
              &nbsp;OK&nbsp;
            </button>

            <button v-on:click="this.window.open('/assets/connectsf/vmt.zip')"
                    class="small ui right labeled icon floated color1 button"
                    style="margin-right:5px">
                    <i class="icon download"></i>
                    Download data (.zip)
            </button>

            <button v-on:click="this.window.open('https://connectsf.org/','_blank')"
                    class="small ui right floated basic teal button"
                    style="margin-right:5px">
                    Learn more&hellip;
            </button>
          </div>
    </div>
  </div>
  <div id="sfmap"></div>
</div>
